<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tracked Controls</title>
    <meta name="description" content="Tracked Controls â€“ A-Frame" />
    <!-- <script src="../aframe.js"></script> -->
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="./utils/perlin.js"></script>
    <script src="components/aabb-collider.js"></script>
    <script src="components/bow-and-arrow.js"></script>
    <script src="components/grab.js"></script>
    <script src="components/snap.js"></script>
    <script src="components/intersection-spawn.js"></script>
    <script src="components/ground.js"></script>
    <script src="components/controls.js"></script>
    <script src="components/minecraft-texture.js"></script>
    <script src="components/minecraft-hands.js"></script>
    <script src="components/voxel-world.js"></script>
    <script src="components/infinite-grid.js"></script>
    <script src="components/aframe-physics-system.min.js"></script>
    <script src="shaders/skyGradient.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.0.1/dist/aframe-event-set-component.min.js"></script>
  </head>
  <body>
    <a-scene
      renderer="colorManagement: true;"
      fog="type: linear; color: #888; far: 120; near: 30"
    >
      <a-assets>
        <img
          id="groundTexture"
          src="https://cdn.aframe.io/a-painter/images/floor.jpg"
        />
        <a-mixin
          id="voxel"
          geometry="primitive: box; height: 1; width: 1; depth: 1"
          snap="offset: .5 .5 .5; snap: 1 1 1"
          minecraft-texture
        ></a-mixin>
        <a-mixin
          id="cube"
          event-set__grab="material.color: #FFEF4F"
          event-set__grabend="material.color: #F2E646"
          event-set__hit="material.color: #F2E646"
          event-set__hitend="material.color: #EF2D5E"
          event-set__mousedown="material.color: #FFEF4F"
          event-set__mouseenter="material.color: #F2E646"
          event-set__mouseleave="material.color: #EF2D5E"
          event-set__mouseup="material.color: #F2E646"
          geometry="primitive: box; height: 0.30; width: 0.30; depth: 0.30"
          material="color: #EF2D5E;"
        ></a-mixin>
        <a-asset-item
          id="zombie"
          src="./assets/zombie/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="ground"
          src="https://cdn.aframe.io/examples/tracked-controls/ground.glb"
        ></a-asset-item>
        <a-asset-item
          id="bow-obj"
          src="assets/models/bow-rotate-no-string.obj"
        ></a-asset-item>
        <a-asset-item
          id="bow-mtl"
          src="assets/models/bow-rotate-no-string.mtl"
        ></a-asset-item>
        <a-asset-item
          id="arrow-obj"
          src="assets/models/low-poly-arrow-rotated.obj"
        ></a-asset-item>
        <a-asset-item
          id="arrow-mtl"
          src="assets/models/low-poly-arrow.mtl"
        ></a-asset-item>
      </a-assets>

      <a-entity class="cube" mixin="voxel"></a-entity>
      <!-- Environment -->
      <!-- <a-cylinder
        id="ground"
        src="#groundTexture"
        radius="60"
        height="0.1"
      ></a-cylinder> -->

      <!-- Zombie -->
      <!-- <a-entity id="zombie" gltf-model="#zombie" scale="0.15 0.15 0.15"></a-entity> -->

      <a-entity
        id="sky"
        geometry="primitive: sphere; radius: 600;"
        material="shader: skyGradient; colorTop: #353449; colorBottom: #BC483E; side: back"
        animation__colorTop="property: material.colorTop; type: color; to: #576e71; dur: 60000; dir: alternate; loop: true"
        animation__colorBot="property: material.colorBottom; type: color; to: #e1c45e; dur: 60000; dir: alternate; loop: true"
      ></a-entity>
      <a-entity
        id="world"
        position="-16, -20, -16"
        voxel-world="centerCell: 0,0"
        infinite-grid
      ></a-entity>
      <!-- <a-entity
        light="type: point; color: #f4f4f4; intensity: 0.1; distance: 0"
        position="-2.5 1.2 2.2"
      ></a-entity>
      <a-entity
        light="type: point; color: #f4f4f4; intensity: 0.1; distance: 0"
        position="-20 -7 -40"
      ></a-entity> -->
      <a-entity
        light="type: ambient; color: #f4f4f4; intensity: 0.05;"
        position="-8 10 -18"
        animation="property: light.intensity; to: .8; dur: 60000; dir: alternate; loop: true"
      ></a-entity>
      <!-- Hands -->
      <a-entity id="camera-rig" movement-controls="fly: true">
        <a-entity position="0 1.6 2" camera look-controls></a-entity>
        <a-entity
          id="left-hand"
          minecraft-hand="hand: left"
          aabb-collider="objects: .cube;"
          grab
        >
          <!-- Bow and Arrow -->
          <a-entity
            id="bowContainer"
            bow-and-arrow
            position="0 0 0"
          ></a-entity>
        </a-entity>
        <a-entity
          id="right-hand"
          laser-controls
          minecraft-hand="hand: right"
          intersection-spawn="event: click; mixin: voxel; class: cube"
          aabb-collider="objects: .cube;"
          grab
        >
          <a-entity
            id="preShotArrow"
            obj-model="obj: #arrow-obj; mtl: #arrow-mtl"
            position="0 0 0"
            scale="0.05 0.05 0.05"
            visible="true"
          ></a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
